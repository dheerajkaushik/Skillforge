services:
  # 1. Backend Service
  - type: web
    name: skillforge-backend
    runtime: docker
    rootDir: backend             # ðŸ‘ˆ Points to backend folder
    plan: free                   # ðŸ‘ˆ Free tier (spins down after inactivity)
    envVars:
      - key: SPRING_DATASOURCE_URL
        sync: false              # You will enter this in the Dashboard
      - key: SPRING_DATASOURCE_USERNAME
        sync: false
      - key: SPRING_DATASOURCE_PASSWORD
        sync: false
      - key: RUNNER_URL
        fromService:
          type: web
          name: skillforge-runner
          property: url          # Auto-links to the runner's URL

  # 2. Frontend Service (Docker)
  # Note: It is usually cheaper/faster to deploy React as a "Static Site" on Render,
  # but this config uses your Dockerfile as you requested.
  - type: web
    name: skillforge-frontend
    runtime: docker
    rootDir: frontend            # ðŸ‘ˆ Points to frontend folder
    plan: free
    envVars:
      - key: REACT_APP_API_BASE_URL
        fromService:
          type: web
          name: skillforge-backend
          property: url          # Auto-links to the backend's URL

  # 3. Runner Service
  - type: web
    name: skillforge-runner
    runtime: docker
    rootDir: skillforge-runner   # ðŸ‘ˆ Points to runner folder
    plan: free
    envVars:
      - key: SOME_RUNNER_VAR
        value: some_value